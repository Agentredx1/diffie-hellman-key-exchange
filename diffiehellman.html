<!DOCTYPE html>
<html>
<head>
<title>Diffie-Hellman Key Exchange</title>
<style>
  body {text-align: center;}
</style>
</head>

<script>
//const primeNumbers = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31];
//const primitiveRoots = [1, 2, 3, 5, 7, 11, 7, 13, 7, 18, 17];

//var randPrime = Math.floor(Math.random()*primeNumbers.length);
var prime =  31;//primeNumbers[randPrime];
var keyGen = 3;//primitiveRoots[randPrime];
var privateKeyA = Math.floor(Math.random() * 100) + 1;
var privateKeyB = Math.floor(Math.random() * 100) + 1;

var messageA = 0;
var messageB = 0;

function getMessage(privateKey, exchangedKey){
	var message = (exchangedKey^privateKey) % prime; 
    return message;
}//end get secret code

function exchange(){
	privateKeyA = Math.floor(Math.random() * 10) + 1;
	privateKeyB = Math.floor(Math.random() * 10) + 1;
  //generate public keys
  var publicKeyA = genPublic(privateKeyA);
  var publicKeyB = genPublic(privateKeyB);
  //now A and B trade these new public keys
  //note A and B have exchanged keys, so pass the other as parameter
  messageA = getMessage(privateKeyA, publicKeyB);
  messageB = getMessage(privateKeyB, publicKeyA);
  
  
  document.getElementById("messageA").innerHTML = messageA;
  document.getElementById("messageB").innerHTML = messageB;
  document.getElementById("userA").innerHTML = "public key: " + publicKeyA + "private key: " + privateKeyA;
  document.getElementById("userB").innerHTML = "public key: " + publicKeyB + "private key: " + privateKeyB;
  
}//end exchange, computing everything

</script>

<body>

<h1>Diffie-Hellman Key Exchange</h1>
<p> User A</p>
<p id = "userA">public key: __ private key: __</p>
<p> User B</p>
<p id = "userB">public key: __ private key: __</p>
<p> Message A decrypted: </p>
<p id = "messageA"> _</p>
<p> Message B decrypted: </p>
<p id = "messageB"> _</p>
<button onclick="exchange()"> exchange </button>
</body>
</html>
